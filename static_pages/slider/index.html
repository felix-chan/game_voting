<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="author" content="Felix CHAN">
    <title>Photo sliders</title>
    <link rel="stylesheet" href="/files/css/bootstrap.css">
    <link rel="stylesheet" href="/files/css/carousel.css">
</head>

<body>
    <div class="bd-example">
        <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel">
            <!-- <ol class="carousel-indicators">
            <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
            <li data-target="#carouselExampleCaptions" data-slide-to="2"></li>
          </ol> -->
            <div class="carousel-inner text-center" id="carousel-inner">
                <!-- Image will be generate by javascript -->
            </div>
            <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
    <div class="clear"></div>
    <div class="text-right">
        <div class="col-12 qr-layer">Scan QR code for more photo <img src="/files/upload_images/qr_code.png" alt="QR Code" height="250px"></div>
    </div>

    <script src="/files/js/jquery-3.3.1.slim.min.js"></script>
    <script src="/files/js/bootstrap.min.js"></script>
    <script src="https://getbootstrap.com/docs/4.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        var total_img = 4;

        function zfill(num, len) {
            return (Array(len).join("0") + num).slice(-len);
        }

        function gen_image(id, url) {
            var gid = zfill(id, 2);
            var active = '';
            if (id == 1) {
                active = 'active';
            }
            var image_txt = `
                <div class="carousel-item ${active}">
                    <div class="background-image" style="background-image: url('${url}');"></div>
                    <div class="carousel-caption d-none d-md-block">
                        <h2>Group ${gid}</h2>
                    </div>
                    <div class="carousel-img"><img src="${url}" class="d-block" alt="Group ${gid}"></div>
                </div>
            `

            $(image_txt).appendTo("#carousel-inner");
        }

        $(document).ready(function(e) {
            $.ajax({
                url: '../files/json/images.json',
                dataType: 'json'
            }).done(function(e) {
                var total_images = e.total_gp;
                for (var i = 1; i <= total_images; i++) {
                    var img_url = e.images[i-1]['original'];
                    if (screen.width <= 1024){
                        img_url = e.images[i-1]['small'];
                    }else if(screen.width <= 1920){
                        img_url = e.images[i-1]['large'];
                    }
                    gen_image(i, img_url);
                }

                $('#carouselExampleCaptions').carousel({
                    interval: 50000
                });
            });

        });
    </script>
</body>

</html>